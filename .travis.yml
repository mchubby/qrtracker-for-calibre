language: python
python: 2.7.9
notifications:
    email: false

before_install:
    - echo "before_install"
    - pip install pycodestyle
    - pip install autopep8

install:
    - echo "install"

before_script:
    - echo "before_script"
    - git config --global user.email "ac@example.org"
    - git config --global user.name "Travis"

script:
    - echo "script"
    # - num_errors_before=`find . ! -path './extern/*' -type f -name \*.py -exec pycodestyle --ignore=E303,E402 --max-line-length=128 {} + | wc -l`
    # - echo $num_errors_before
    - cd "$TRAVIS_BUILD_DIR"
    #- git checkout $TRAVIS_BRANCH
    #- find . ! -path './extern/*' -type f -name \*.py -exec autopep8 --recursive --aggressive --aggressive --in-place --ignore E303,E402 {} +
    #- num_errors_after=`find . ! -path './extern/*' -type f -name \*.py -exec pycodestyle --ignore=E303,E402 --max-line-length=128 {} + | wc -l`
    #- echo $num_errors_after
    #- |
    #    if (( $num_errors_after < $num_errors_before )); then
    #        git commit -a -m "automated pycodestyle fix"
    #        git config --global push.default simple # Push only to the current branch.  
    #        # Make sure to make the output quiet, or else the API token will 
    #        # leak!  This works because the API key can replace your password.
    #        git push --quiet
    #    fi
    #- cd "$TRAVIS_BUILD_DIR"
    # List the remaining errors - these will have to be fixed manually
    - find . ! -path './extern/*' -type f -name \*.py -exec pycodestyle  --ignore=E303,E402 --max-line-length=128 {} +
#
